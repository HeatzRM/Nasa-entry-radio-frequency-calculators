{% extends "base.html" %}

{% block content %}

{% include 'nav.html' %}

<style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
</style>


<body>

<div class="ui main text container">

  
      <div class="ui form">

        <div class="field">
          <label>Antenna 1</label>
          <div class="ui left icon input">
            <input type="text" placeholder="Antenna 1" id="Antenna1">
            <i class="wifi icon"></i>
          </div>
        </div>

        <div class="field">
          <label>Antenna 2</label>
          <div class="ui left icon input">
            <input type="text" placeholder="Antenna 2" id="Antenna2">
            <i class="wifi icon"></i>
          </div>
        </div>


      </div>

    

<br />
    <div class="ui blue button" onclick="drawCircle(10.720150, 122.562103, 500*29);">Submit</div>

    <div class="ui blue button" onclick="showStorms()">Test</div>

</div>
</body>



 <div id="map"></div>
    <script>

    
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 4
        });
      }


    function drawOnclick() {
        var antennasCircle = new google.maps.Circle({
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: "#FF0000",
        fillOpacity: 0.35,
        map: map,
        center: {
            lat: 48.8534100,
            lng: 2.34
        },
        radius: 1000 * 100
        });
        map.fitBounds(antennasCircle.getBounds());
    }

    function drawCircle(lat, lng, radius) {
        var antennasCircle = new google.maps.Circle({
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: "#FF0000",
        fillOpacity: 0.35,
        map: map,
        center: {
            lat: lat,
            lng: lng
        },
        radius: radius
        });
        map.fitBounds(antennasCircle.getBounds());
    }

    function showStorms() {
        $.ajax({ 
                type : "GET", 
                url : `storm_data`, 
                success : function(result) { 
                
                console.log(eval(result)[0].geometries[0].coordinates[0]); // Longitude
                console.log(eval(result)[0].geometries[0].coordinates[1]); // Latitude
                console.log(eval(result)[0].geometries[1].coordinates[0]); // Longitude
                console.log(eval(result)[0].geometries[1].coordinates[1]); // Latitude

                const Longitude1 = eval(result)[0].geometries[0].coordinates[0];
                const Latitude1 = eval(result)[0].geometries[0].coordinates[1];
                const Longitude2 = eval(result)[0].geometries[1].coordinates[0];
                const Latitude2 = eval(result)[0].geometries[1].coordinates[1];


                //quick calculation
                var X = (Latitude1 + Latitude2) / 2
                var Y = (Longitude1 + Longitude2) / 2

                //var D = Math.sqrt(Math.pow((Latitude1 - Latitude2), 2) + Math.pow((Longitude1 - Longitude2), 2))

                //var _Radius = D/2
                
                drawCircle(X, Y,   1000000 )

                

                
                }, 
                error : function(result) { 
                console.log(result);
                } 
            }); 
        
    }



    </script>


    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCV47mHaKm2W7oFPJusEqpYC36UfXj1fxU&callback=initMap"
    async defer>
   
    </script>
 

{% endblock %}